{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///Users/pumanar/Repos/AI4Devs/finalproject-PAUR/site/src/components/auth/ProtectedRoute.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\n\ninterface ProtectedRouteProps {\n    children: React.ReactNode;\n}\n\nexport const ProtectedRoute = ({ children }: ProtectedRouteProps) => {\n    const router = useRouter();\n\n    useEffect(() => {\n        const token = localStorage.getItem(\"authToken\");\n        if (!token) {\n            router.push(\"/\");\n        }\n    }, [router]);\n\n    return <>{children}</>;\n};\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AASO,MAAM,iBAAiB,CAAC,EAAE,QAAQ,EAAuB;IAC5D,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,CAAC,OAAO;YACR,OAAO,IAAI,CAAC;QAChB;IACJ,GAAG;QAAC;KAAO;IAEX,qBAAO;kBAAG;;AACd"}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///Users/pumanar/Repos/AI4Devs/finalproject-PAUR/site/src/components/layout/DashboardLayout.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRouter } from \"next/navigation\";\n\ninterface DashboardLayoutProps {\n    children: React.ReactNode;\n}\n\nexport const DashboardLayout = ({ children }: DashboardLayoutProps) => {\n    const router = useRouter();\n\n    const handleLogout = () => {\n        localStorage.removeItem(\"authToken\");\n        router.push(\"/\");\n    };\n\n    return (\n        <div className=\"min-h-screen bg-gray-100\">\n            <nav className=\"bg-white shadow-sm\">\n                <div className=\"max-w-[95%] mx-auto px-4\">\n                    <div className=\"flex justify-between h-16\">\n                        <div className=\"flex\">\n                            <div className=\"flex-shrink-0 flex items-center\">\n                                <img className=\"h-8 w-auto\" src=\"/logo.svg\" alt=\"Logo\" />\n                            </div>\n                        </div>\n                        <div className=\"flex items-center\">\n                            <button\n                                onClick={handleLogout}\n                                className=\"ml-4 px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900\"\n                            >\n                                Cerrar Sesión\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </nav>\n            <main className=\"max-w-[95%] mx-auto py-6 px-4\">{children}</main>\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAQO,MAAM,kBAAkB,CAAC,EAAE,QAAQ,EAAwB;IAC9D,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,eAAe;QACjB,aAAa,UAAU,CAAC;QACxB,OAAO,IAAI,CAAC;IAChB;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAI,WAAU;8BACX,cAAA,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAI,WAAU;0CACX,cAAA,8OAAC;oCAAI,WAAU;8CACX,cAAA,8OAAC;wCAAI,WAAU;wCAAa,KAAI;wCAAY,KAAI;;;;;;;;;;;;;;;;0CAGxD,8OAAC;gCAAI,WAAU;0CACX,cAAA,8OAAC;oCACG,SAAS;oCACT,WAAU;8CACb;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAOjB,8OAAC;gBAAK,WAAU;0BAAiC;;;;;;;;;;;;AAG7D"}},
    {"offset": {"line": 163, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"sources":["file:///Users/pumanar/Repos/AI4Devs/finalproject-PAUR/site/src/components/templates/TemplateEditor/components/EditorToolbar.tsx"],"sourcesContent":["\"use client\";\n\nimport { Editor } from \"@tiptap/react\";\nimport { BoldIcon, ItalicIcon, ListBulletIcon, QueueListIcon, PhotoIcon } from \"@heroicons/react/24/outline\";\n\ninterface EditorToolbarProps {\n    editor: Editor | null;\n    onImageClick: () => void;\n}\n\nexport const EditorToolbar = ({ editor, onImageClick }: EditorToolbarProps) => {\n    if (!editor) {\n        return null;\n    }\n\n    return (\n        <div className=\"border-b border-gray-200 p-2 flex gap-2\">\n            <button\n                onClick={() => editor.chain().focus().toggleBold().run()}\n                className={`p-2 rounded-md tooltip ${\n                    editor.isActive(\"bold\") ? \"bg-gray-100 text-blue-600\" : \"hover:bg-gray-100 text-gray-600\"\n                }`}\n                title=\"Negrita\"\n            >\n                <BoldIcon className=\"h-5 w-5\" />\n            </button>\n            <button\n                onClick={() => editor.chain().focus().toggleItalic().run()}\n                className={`p-2 rounded-md tooltip ${\n                    editor.isActive(\"italic\") ? \"bg-gray-100 text-blue-600\" : \"hover:bg-gray-100 text-gray-600\"\n                }`}\n                title=\"Cursiva\"\n            >\n                <ItalicIcon className=\"h-5 w-5\" />\n            </button>\n            <button\n                onClick={() => editor.chain().focus().toggleBulletList().run()}\n                className={`p-2 rounded-md tooltip ${\n                    editor.isActive(\"bulletList\") ? \"bg-gray-100 text-blue-600\" : \"hover:bg-gray-100 text-gray-600\"\n                }`}\n                title=\"Lista con viñetas\"\n            >\n                <ListBulletIcon className=\"h-5 w-5\" />\n            </button>\n            <button\n                onClick={() => editor.chain().focus().toggleOrderedList().run()}\n                className={`p-2 rounded-md tooltip ${\n                    editor.isActive(\"orderedList\") ? \"bg-gray-100 text-blue-600\" : \"hover:bg-gray-100 text-gray-600\"\n                }`}\n                title=\"Lista numerada\"\n            >\n                <QueueListIcon className=\"h-5 w-5\" />\n            </button>\n            <div className=\"w-px h-6 bg-gray-200 mx-2 self-center\" />\n            <button\n                onClick={onImageClick}\n                className=\"p-2 rounded-md tooltip hover:bg-gray-100 text-gray-600\"\n                title=\"Insertar imagen\"\n            >\n                <PhotoIcon className=\"h-5 w-5\" />\n            </button>\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;AAGA;AAAA;AAAA;AAAA;AAAA;AAHA;;;AAUO,MAAM,gBAAgB,CAAC,EAAE,MAAM,EAAE,YAAY,EAAsB;IACtE,IAAI,CAAC,QAAQ;QACT,OAAO;IACX;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBACG,SAAS,IAAM,OAAO,KAAK,GAAG,KAAK,GAAG,UAAU,GAAG,GAAG;gBACtD,WAAW,CAAC,uBAAuB,EAC/B,OAAO,QAAQ,CAAC,UAAU,8BAA8B,mCAC1D;gBACF,OAAM;0BAEN,cAAA,8OAAC,+MAAA,CAAA,WAAQ;oBAAC,WAAU;;;;;;;;;;;0BAExB,8OAAC;gBACG,SAAS,IAAM,OAAO,KAAK,GAAG,KAAK,GAAG,YAAY,GAAG,GAAG;gBACxD,WAAW,CAAC,uBAAuB,EAC/B,OAAO,QAAQ,CAAC,YAAY,8BAA8B,mCAC5D;gBACF,OAAM;0BAEN,cAAA,8OAAC,mNAAA,CAAA,aAAU;oBAAC,WAAU;;;;;;;;;;;0BAE1B,8OAAC;gBACG,SAAS,IAAM,OAAO,KAAK,GAAG,KAAK,GAAG,gBAAgB,GAAG,GAAG;gBAC5D,WAAW,CAAC,uBAAuB,EAC/B,OAAO,QAAQ,CAAC,gBAAgB,8BAA8B,mCAChE;gBACF,OAAM;0BAEN,cAAA,8OAAC,2NAAA,CAAA,iBAAc;oBAAC,WAAU;;;;;;;;;;;0BAE9B,8OAAC;gBACG,SAAS,IAAM,OAAO,KAAK,GAAG,KAAK,GAAG,iBAAiB,GAAG,GAAG;gBAC7D,WAAW,CAAC,uBAAuB,EAC/B,OAAO,QAAQ,CAAC,iBAAiB,8BAA8B,mCACjE;gBACF,OAAM;0BAEN,cAAA,8OAAC,yNAAA,CAAA,gBAAa;oBAAC,WAAU;;;;;;;;;;;0BAE7B,8OAAC;gBAAI,WAAU;;;;;;0BACf,8OAAC;gBACG,SAAS;gBACT,WAAU;gBACV,OAAM;0BAEN,cAAA,8OAAC,iNAAA,CAAA,YAAS;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAIrC"}},
    {"offset": {"line": 282, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 288, "column": 0}, "map": {"version":3,"sources":["file:///Users/pumanar/Repos/AI4Devs/finalproject-PAUR/site/src/components/templates/TemplateEditor/components/SectionSelector.tsx"],"sourcesContent":["\"use client\";\n\ninterface Section {\n    id: string;\n    label: string;\n}\n\ninterface SectionSelectorProps {\n    currentSection: string;\n    onSectionChange: (sectionId: string) => void;\n}\n\nexport const SectionSelector = ({ currentSection, onSectionChange }: SectionSelectorProps) => {\n    const sections: Section[] = [\n        { id: \"header\", label: \"Encabezado\" },\n        { id: \"body\", label: \"Contenido\" },\n        { id: \"footer\", label: \"Pie de página\" },\n    ];\n\n    return (\n        <div className=\"flex border-b border-gray-200\">\n            {sections.map((section) => (\n                <button\n                    key={section.id}\n                    onClick={() => onSectionChange(section.id)}\n                    className={`px-4 py-2 text-sm font-medium border-b-2 -mb-px ${\n                        currentSection === section.id\n                            ? \"border-blue-500 text-blue-600\"\n                            : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n                    }`}\n                >\n                    {section.label}\n                </button>\n            ))}\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;AAAA;;AAYO,MAAM,kBAAkB,CAAC,EAAE,cAAc,EAAE,eAAe,EAAwB;IACrF,MAAM,WAAsB;QACxB;YAAE,IAAI;YAAU,OAAO;QAAa;QACpC;YAAE,IAAI;YAAQ,OAAO;QAAY;QACjC;YAAE,IAAI;YAAU,OAAO;QAAgB;KAC1C;IAED,qBACI,8OAAC;QAAI,WAAU;kBACV,SAAS,GAAG,CAAC,CAAC,wBACX,8OAAC;gBAEG,SAAS,IAAM,gBAAgB,QAAQ,EAAE;gBACzC,WAAW,CAAC,gDAAgD,EACxD,mBAAmB,QAAQ,EAAE,GACvB,kCACA,8EACR;0BAED,QAAQ,KAAK;eART,QAAQ,EAAE;;;;;;;;;;AAanC"}},
    {"offset": {"line": 326, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 332, "column": 0}, "map": {"version":3,"sources":["file:///Users/pumanar/Repos/AI4Devs/finalproject-PAUR/site/src/components/templates/TemplateEditor/components/EditorContent.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n    ArrowsPointingOutIcon,\n    Bars3BottomLeftIcon,\n    Bars3BottomRightIcon,\n    Bars3Icon,\n    BoldIcon,\n    ItalicIcon,\n    ListBulletIcon,\n    PhotoIcon,\n    QueueListIcon,\n    TableCellsIcon\n} from \"@heroicons/react/24/solid\";\nimport BubbleMenuExtension from \"@tiptap/extension-bubble-menu\";\nimport Image from \"@tiptap/extension-image\";\nimport Placeholder from \"@tiptap/extension-placeholder\";\nimport TextAlign from '@tiptap/extension-text-align';\nimport { BubbleMenu, EditorContent as TiptapContent, useEditor } from \"@tiptap/react\";\nimport StarterKit from \"@tiptap/starter-kit\";\nimport Table from '@tiptap/extension-table';\nimport TableRow from '@tiptap/extension-table-row';\nimport TableCell from '@tiptap/extension-table-cell';\nimport TableHeader from '@tiptap/extension-table-header';\nimport { useEffect, useRef, useState } from \"react\";\nimport { VariableSelector } from \"./VariableSelector\";\nimport { TemplateVariable } from \"@/types/template\";\n\ninterface EditorContentProps {\n    section: string;\n    content: string;\n    onChange: (content: string) => void;\n    editor: Editor | null;\n    setEditor: (editor: Editor | null) => void;\n}\n\nconst EditorContent = (props: EditorContentProps) => {\n    const [isMounted, setIsMounted] = useState(false);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n\n    const editor = useEditor({\n        immediatelyRender: false,\n        extensions: [\n            StarterKit,\n            Placeholder.configure({\n                placeholder: `Edita el contenido del ${props.section} aquí...`,\n                emptyEditorClass: \"is-editor-empty\",\n            }),\n            BubbleMenuExtension,\n            Image.configure({\n                HTMLAttributes: {\n                    class: 'max-w-full h-auto',\n                },\n            }),\n            TextAlign.configure({\n                types: ['heading', 'paragraph', 'image', 'table'],\n                alignments: ['left', 'center', 'right', 'justify'],\n            }),\n            Table.configure({\n                resizable: true,\n                HTMLAttributes: {\n                    class: 'border-collapse table-auto w-full',\n                },\n            }),\n            TableRow,\n            TableCell,\n            TableHeader,\n        ],\n        content: props.content || \"<p></p>\",\n        onUpdate: ({ editor }) => {\n            props.onChange(editor.getHTML());\n        },\n        editorProps: {\n            attributes: {\n                class: \"prose prose-sm sm:prose lg:prose-lg xl:prose-xl focus:outline-none min-h-[200px] w-full max-w-none\",\n            },\n        },\n    });\n\n    useEffect(() => {\n        props.setEditor(editor);\n    }, [editor, props.setEditor]);\n\n    const handleImageUpload = async (file: File) => {\n        if (!editor) return;\n\n        if (file.size > 1024 * 1024) {\n            alert('La imagen no debe superar 1MB');\n            return;\n        }\n\n        if (!file.type.startsWith('image/')) {\n            alert('Solo se permiten archivos de imagen');\n            return;\n        }\n\n        try {\n            const reader = new FileReader();\n            reader.onload = (e) => {\n                if (typeof e.target?.result === 'string') {\n                    editor\n                        .chain()\n                        .focus()\n                        .setImage({ src: e.target.result, alt: file.name })\n                        .run();\n                }\n            };\n            reader.readAsDataURL(file);\n        } catch (error) {\n            console.error('Error al cargar la imagen:', error);\n            alert('Error al cargar la imagen');\n        }\n    };\n\n    const handleImageClick = () => {\n        fileInputRef.current?.click();\n    };\n\n    const insertTable = (cols: number) => {\n        if (!editor) return;\n        editor.chain().focus().insertTable({ rows: 1, cols }).run();\n    };\n\n    const handleVariableSelect = (variable: TemplateVariable) => {\n        if (!editor) return;\n        editor.chain().focus().insertContent(variable.key).run();\n    };\n\n    useEffect(() => {\n        setIsMounted(true);\n    }, []);\n\n    if (!isMounted || !editor) {\n        return (\n            <div className=\"flex-1 p-4\">\n                <div className=\"border border-gray-200 rounded-lg min-h-[200px] p-4\">\n                    <p className=\"text-gray-400\">Cargando editor...</p>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"flex-1\">\n            <div className=\"border border-gray-200 rounded-lg overflow-hidden bg-white\">\n                <div className=\"min-h-[200px] w-full relative\">\n                    <input\n                        type=\"file\"\n                        ref={fileInputRef}\n                        className=\"hidden\"\n                        accept=\"image/*\"\n                        onChange={(e) => {\n                            const file = e.target.files?.[0];\n                            if (file) handleImageUpload(file);\n                            e.target.value = \"\";\n                        }}\n                    />\n                    {editor && (\n                        <BubbleMenu\n                            editor={editor}\n                            tippyOptions={{ duration: 100 }}\n                            className=\"bg-white shadow-lg border border-gray-200 rounded-lg flex overflow-hidden\"\n                        >\n                            <button\n                                onClick={() => editor.chain().focus().toggleBold().run()}\n                                className={`p-2 hover:bg-gray-100 ${\n                                    editor.isActive(\"bold\") ? \"text-blue-600 bg-gray-100\" : \"text-gray-600\"\n                                }`}\n                            >\n                                <BoldIcon className=\"w-4 h-4\" />\n                            </button>\n                            <button\n                                onClick={() => editor.chain().focus().toggleItalic().run()}\n                                className={`p-2 hover:bg-gray-100 ${\n                                    editor.isActive(\"italic\") ? \"text-blue-600 bg-gray-100\" : \"text-gray-600\"\n                                }`}\n                            >\n                                <ItalicIcon className=\"w-4 h-4\" />\n                            </button>\n                            <div className=\"w-px h-4 bg-gray-200 my-auto mx-1\" />\n                            <button\n                                onClick={() => editor.chain().focus().setTextAlign(\"left\").run()}\n                                className={`p-2 hover:bg-gray-100 ${\n                                    editor.isActive({ textAlign: \"left\" })\n                                        ? \"text-blue-600 bg-gray-100\"\n                                        : \"text-gray-600\"\n                                }`}\n                            >\n                                <Bars3BottomLeftIcon className=\"w-4 h-4\" />\n                            </button>\n                            <button\n                                onClick={() => editor.chain().focus().setTextAlign(\"center\").run()}\n                                className={`p-2 hover:bg-gray-100 ${\n                                    editor.isActive({ textAlign: \"center\" })\n                                        ? \"text-blue-600 bg-gray-100\"\n                                        : \"text-gray-600\"\n                                }`}\n                            >\n                                <Bars3Icon className=\"w-4 h-4\" />\n                            </button>\n                            <button\n                                onClick={() => editor.chain().focus().setTextAlign(\"right\").run()}\n                                className={`p-2 hover:bg-gray-100 ${\n                                    editor.isActive({ textAlign: \"right\" })\n                                        ? \"text-blue-600 bg-gray-100\"\n                                        : \"text-gray-600\"\n                                }`}\n                            >\n                                <Bars3BottomRightIcon className=\"w-4 h-4\" />\n                            </button>\n                            <button\n                                onClick={() => editor.chain().focus().setTextAlign(\"justify\").run()}\n                                className={`p-2 hover:bg-gray-100 ${\n                                    editor.isActive({ textAlign: \"justify\" })\n                                        ? \"text-blue-600 bg-gray-100\"\n                                        : \"text-gray-600\"\n                                }`}\n                            >\n                                <ArrowsPointingOutIcon className=\"w-4 h-4\" />\n                            </button>\n                            <div className=\"w-px h-4 bg-gray-200 my-auto mx-1\" />\n                            <button\n                                onClick={() => editor.chain().focus().toggleBulletList().run()}\n                                className={`p-2 hover:bg-gray-100 ${\n                                    editor.isActive(\"bulletList\") ? \"text-blue-600 bg-gray-100\" : \"text-gray-600\"\n                                }`}\n                            >\n                                <ListBulletIcon className=\"w-4 h-4\" />\n                            </button>\n                            <button\n                                onClick={() => editor.chain().focus().toggleOrderedList().run()}\n                                className={`p-2 hover:bg-gray-100 ${\n                                    editor.isActive(\"orderedList\") ? \"text-blue-600 bg-gray-100\" : \"text-gray-600\"\n                                }`}\n                            >\n                                <QueueListIcon className=\"w-4 h-4\" />\n                            </button>\n                            <div className=\"w-px h-4 bg-gray-200 my-auto mx-1\" />\n                            <button\n                                onClick={handleImageClick}\n                                className=\"p-2 hover:bg-gray-100 text-gray-600\"\n                                title=\"Insertar imagen\"\n                            >\n                                <PhotoIcon className=\"w-4 h-4\" />\n                            </button>\n                            <div className=\"relative\">\n                                <button\n                                    onClick={() => insertTable(2)}\n                                    className=\"p-2 hover:bg-gray-100 text-gray-600\"\n                                    title=\"Insertar tabla\"\n                                >\n                                    <TableCellsIcon className=\"w-4 h-4\" />\n                                </button>\n                                <div className=\"absolute hidden hover:flex group-hover:flex flex-col bg-white shadow-lg border border-gray-200 rounded-lg p-2 z-50 top-full left-0 min-w-[120px]\">\n                                    <button\n                                        onClick={() => insertTable(2)}\n                                        className=\"px-4 py-2 hover:bg-gray-100 text-sm text-left\"\n                                    >\n                                        2 columnas\n                                    </button>\n                                    <button\n                                        onClick={() => insertTable(3)}\n                                        className=\"px-4 py-2 hover:bg-gray-100 text-sm text-left\"\n                                    >\n                                        3 columnas\n                                    </button>\n                                </div>\n                            </div>\n                        </BubbleMenu>\n                    )}\n                    <TiptapContent editor={editor} />\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default EditorContent;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 772, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 778, "column": 0}, "map": {"version":3,"sources":["file:///Users/pumanar/Repos/AI4Devs/finalproject-PAUR/site/src/services/templates/variableService.ts"],"sourcesContent":["import { TemplateVariableGroup } from \"@/types/template\";\n\nconst mockVariableGroups: TemplateVariableGroup[] = [\n    {\n        id: \"personal\",\n        name: \"Datos Personales\",\n        variables: [\n            {\n                id: \"nombre\",\n                name: \"Nombre Completo\",\n                key: \"{{nombre}}\",\n                type: \"text\",\n                description: \"Nombre completo del titular\"\n            },\n            {\n                id: \"rut\",\n                name: \"RUT\",\n                key: \"{{rut}}\",\n                type: \"text\",\n                description: \"RUT del titular\"\n            },\n            {\n                id: \"fecha_nacimiento\",\n                name: \"Fecha de Nacimiento\",\n                key: \"{{fecha_nacimiento}}\",\n                type: \"date\",\n                description: \"Fecha de nacimiento del titular\"\n            }\n        ]\n    },\n    {\n        id: \"documento\",\n        name: \"Datos del Documento\",\n        variables: [\n            {\n                id: \"fecha_emision\",\n                name: \"Fecha de Emisión\",\n                key: \"{{fecha_emision}}\",\n                type: \"date\",\n                description: \"Fecha de emisión del documento\"\n            },\n            {\n                id: \"numero_documento\",\n                name: \"Número de Documento\",\n                key: \"{{numero_documento}}\",\n                type: \"text\",\n                description: \"Número único del documento\"\n            },\n            {\n                id: \"firma_digital\",\n                name: \"Firma Digital\",\n                key: \"{{firma_digital}}\",\n                type: \"signature\",\n                description: \"Firma digital del documento\"\n            }\n        ]\n    }\n];\n\nexport const getVariableGroups = async (): Promise<TemplateVariableGroup[]> => {\n    return new Promise((resolve) => {\n        setTimeout(() => {\n            resolve(mockVariableGroups);\n        }, 500);\n    });\n};"],"names":[],"mappings":";;;AAEA,MAAM,qBAA8C;IAChD;QACI,IAAI;QACJ,MAAM;QACN,WAAW;YACP;gBACI,IAAI;gBACJ,MAAM;gBACN,KAAK;gBACL,MAAM;gBACN,aAAa;YACjB;YACA;gBACI,IAAI;gBACJ,MAAM;gBACN,KAAK;gBACL,MAAM;gBACN,aAAa;YACjB;YACA;gBACI,IAAI;gBACJ,MAAM;gBACN,KAAK;gBACL,MAAM;gBACN,aAAa;YACjB;SACH;IACL;IACA;QACI,IAAI;QACJ,MAAM;QACN,WAAW;YACP;gBACI,IAAI;gBACJ,MAAM;gBACN,KAAK;gBACL,MAAM;gBACN,aAAa;YACjB;YACA;gBACI,IAAI;gBACJ,MAAM;gBACN,KAAK;gBACL,MAAM;gBACN,aAAa;YACjB;YACA;gBACI,IAAI;gBACJ,MAAM;gBACN,KAAK;gBACL,MAAM;gBACN,aAAa;YACjB;SACH;IACL;CACH;AAEM,MAAM,oBAAoB;IAC7B,OAAO,IAAI,QAAQ,CAAC;QAChB,WAAW;YACP,QAAQ;QACZ,GAAG;IACP;AACJ"}},
    {"offset": {"line": 844, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 850, "column": 0}, "map": {"version":3,"sources":["file:///Users/pumanar/Repos/AI4Devs/finalproject-PAUR/site/src/components/templates/TemplateEditor/components/VariableSelector.tsx"],"sourcesContent":["\"use client\";\n\nimport { TemplateVariable, TemplateVariableGroup } from \"@/types/template\";\nimport { useEffect, useState } from \"react\";\nimport { getVariableGroups } from \"@/services/templates/variableService\";\n\ninterface VariableSelectorProps {\n    onSelectVariable: (variable: TemplateVariable) => void;\n}\n\nexport const VariableSelector = ({ onSelectVariable }: VariableSelectorProps) => {\n    const [groups, setGroups] = useState<TemplateVariableGroup[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [selectedGroup, setSelectedGroup] = useState<string | null>(null);\n\n    useEffect(() => {\n        const loadVariables = async () => {\n            try {\n                const data = await getVariableGroups();\n                setGroups(data);\n                if (data.length > 0) {\n                    setSelectedGroup(data[0].id);\n                }\n            } catch (error) {\n                console.error(\"Error loading variables:\", error);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        loadVariables();\n    }, []);\n\n    if (loading) {\n        return <div className=\"p-4 text-gray-500\">Cargando variables...</div>;\n    }\n\n    const selectedGroupData = groups.find(g => g.id === selectedGroup);\n\n    return (\n        <div className=\"p-4 border-l border-gray-200 bg-gray-50\">\n            <h3 className=\"text-sm font-medium text-gray-900 mb-4\">Variables Disponibles</h3>\n            <div className=\"space-y-4\">\n                <select\n                    value={selectedGroup || \"\"}\n                    onChange={(e) => setSelectedGroup(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n                >\n                    {groups.map((group) => (\n                        <option key={group.id} value={group.id}>\n                            {group.name}\n                        </option>\n                    ))}\n                </select>\n\n                <div className=\"space-y-2\">\n                    {selectedGroupData?.variables.map((variable) => (\n                        <button\n                            key={variable.id}\n                            onClick={() => onSelectVariable(variable)}\n                            className=\"w-full text-left px-3 py-2 hover:bg-white rounded-md text-sm flex items-center justify-between group\"\n                        >\n                            <span className=\"text-gray-700\">{variable.name}</span>\n                            <span className=\"text-gray-400 group-hover:text-gray-600\">{variable.key}</span>\n                        </button>\n                    ))}\n                </div>\n            </div>\n        </div>\n    );\n};"],"names":[],"mappings":";;;;AAGA;AACA;AAJA;;;;AAUO,MAAM,mBAAmB,CAAC,EAAE,gBAAgB,EAAyB;IACxE,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAA2B,EAAE;IAChE,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAElE,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,MAAM,gBAAgB;YAClB,IAAI;gBACA,MAAM,OAAO,MAAM,CAAA,GAAA,+IAAA,CAAA,oBAAiB,AAAD;gBACnC,UAAU;gBACV,IAAI,KAAK,MAAM,GAAG,GAAG;oBACjB,iBAAiB,IAAI,CAAC,EAAE,CAAC,EAAE;gBAC/B;YACJ,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,4BAA4B;YAC9C,SAAU;gBACN,WAAW;YACf;QACJ;QAEA;IACJ,GAAG,EAAE;IAEL,IAAI,SAAS;QACT,qBAAO,8OAAC;YAAI,WAAU;sBAAoB;;;;;;IAC9C;IAEA,MAAM,oBAAoB,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAEpD,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAG,WAAU;0BAAyC;;;;;;0BACvD,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBACG,OAAO,iBAAiB;wBACxB,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;wBAChD,WAAU;kCAET,OAAO,GAAG,CAAC,CAAC,sBACT,8OAAC;gCAAsB,OAAO,MAAM,EAAE;0CACjC,MAAM,IAAI;+BADF,MAAM,EAAE;;;;;;;;;;kCAM7B,8OAAC;wBAAI,WAAU;kCACV,mBAAmB,UAAU,IAAI,CAAC,yBAC/B,8OAAC;gCAEG,SAAS,IAAM,iBAAiB;gCAChC,WAAU;;kDAEV,8OAAC;wCAAK,WAAU;kDAAiB,SAAS,IAAI;;;;;;kDAC9C,8OAAC;wCAAK,WAAU;kDAA2C,SAAS,GAAG;;;;;;;+BALlE,SAAS,EAAE;;;;;;;;;;;;;;;;;;;;;;AAY5C"}},
    {"offset": {"line": 968, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 974, "column": 0}, "map": {"version":3,"sources":["file:///Users/pumanar/Repos/AI4Devs/finalproject-PAUR/site/src/components/templates/TemplateEditor/components/PreviewPanel.tsx"],"sourcesContent":["\"use client\";\n\nimport { TemplateVariable } from \"@/types/template\";\nimport { VariableSelector } from \"./VariableSelector\";\n\ninterface PreviewPanelProps {\n    content: {\n        header: string;\n        body: string;\n        footer: string;\n    };\n    onVariableSelect: (variable: TemplateVariable) => void;\n}\n\nexport const PreviewPanel = ({ content, onVariableSelect }: PreviewPanelProps) => {\n    return (\n        <div className=\"w-1/3 border-l border-gray-200 bg-gray-50\">\n            <div className=\"sticky top-4\">\n                <div className=\"border-b border-gray-200\">\n                    <VariableSelector onSelectVariable={onVariableSelect} />\n                </div>\n                <div className=\"p-4\">\n                    <h3 className=\"text-sm font-medium text-gray-900 mb-4\">Vista Previa</h3>\n                    <div className=\"bg-white border border-gray-200 rounded-lg shadow-sm\">\n                        <div className=\"p-4 border-b border-gray-200\">{content.header}</div>\n                        <div className=\"p-4 min-h-[300px]\">{content.body}</div>\n                        <div className=\"p-4 border-t border-gray-200\">{content.footer}</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;AAGA;AAHA;;;AAcO,MAAM,eAAe,CAAC,EAAE,OAAO,EAAE,gBAAgB,EAAqB;IACzE,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAI,WAAU;8BACX,cAAA,8OAAC,mLAAA,CAAA,mBAAgB;wBAAC,kBAAkB;;;;;;;;;;;8BAExC,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAG,WAAU;sCAAyC;;;;;;sCACvD,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAI,WAAU;8CAAgC,QAAQ,MAAM;;;;;;8CAC7D,8OAAC;oCAAI,WAAU;8CAAqB,QAAQ,IAAI;;;;;;8CAChD,8OAAC;oCAAI,WAAU;8CAAgC,QAAQ,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMrF"}},
    {"offset": {"line": 1064, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1070, "column": 0}, "map": {"version":3,"sources":["file:///Users/pumanar/Repos/AI4Devs/finalproject-PAUR/site/src/services/templates/templateService.ts"],"sourcesContent":["import { SaveTemplateRequest, Template, TemplateVersion } from \"@/types/template\";\n\n// Simular guardado automático\nlet autoSaveTimeout: NodeJS.Timeout;\n\nexport const saveTemplate = async (template: SaveTemplateRequest): Promise<Template> => {\n    return new Promise((resolve) => {\n        setTimeout(() => {\n            resolve({\n                id: Math.random().toString(36).substr(2, 9),\n                ...template,\n                version: \"1.0.0\",\n                status: \"draft\",\n                createdAt: new Date().toISOString(),\n                updatedAt: new Date().toISOString(),\n                createdBy: \"Usuario Actual\" // En producción, obtener del contexto de autenticación\n            });\n        }, 1000);\n    });\n};\n\nexport const autoSaveTemplate = (template: SaveTemplateRequest, callback: (saved: Template) => void) => {\n    if (autoSaveTimeout) {\n        clearTimeout(autoSaveTimeout);\n    }\n\n    autoSaveTimeout = setTimeout(async () => {\n        try {\n            const saved = await saveTemplate(template);\n            callback(saved);\n        } catch (error) {\n            console.error(\"Error en autoguardado:\", error);\n        }\n    }, 2000); // Guardar después de 2 segundos de inactividad\n};\n\nexport const publishTemplate = async (templateId: string): Promise<Template> => {\n    return new Promise((resolve) => {\n        setTimeout(() => {\n            resolve({\n                id: templateId,\n                name: \"Plantilla de ejemplo\",\n                content: {\n                    header: \"\",\n                    body: \"\",\n                    footer: \"\"\n                },\n                version: \"1.0.0\",\n                status: \"published\",\n                createdAt: new Date().toISOString(),\n                updatedAt: new Date().toISOString(),\n                createdBy: \"Usuario Actual\"\n            });\n        }, 1000);\n    });\n};\n\nexport const getTemplateVersions = async (templateId: string): Promise<TemplateVersion[]> => {\n    return new Promise((resolve) => {\n        setTimeout(() => {\n            resolve([\n                {\n                    id: \"v1\",\n                    templateId,\n                    version: \"1.0.0\",\n                    content: {\n                        header: \"\",\n                        body: \"\",\n                        footer: \"\"\n                    },\n                    changes: \"Versión inicial\",\n                    createdAt: new Date().toISOString(),\n                    createdBy: \"Usuario Actual\"\n                }\n            ]);\n        }, 500);\n    });\n};"],"names":[],"mappings":";;;;;;AAEA,8BAA8B;AAC9B,IAAI;AAEG,MAAM,eAAe,OAAO;IAC/B,OAAO,IAAI,QAAQ,CAAC;QAChB,WAAW;YACP,QAAQ;gBACJ,IAAI,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,MAAM,CAAC,GAAG;gBACzC,GAAG,QAAQ;gBACX,SAAS;gBACT,QAAQ;gBACR,WAAW,IAAI,OAAO,WAAW;gBACjC,WAAW,IAAI,OAAO,WAAW;gBACjC,WAAW,iBAAiB,uDAAuD;YACvF;QACJ,GAAG;IACP;AACJ;AAEO,MAAM,mBAAmB,CAAC,UAA+B;IAC5D,IAAI,iBAAiB;QACjB,aAAa;IACjB;IAEA,kBAAkB,WAAW;QACzB,IAAI;YACA,MAAM,QAAQ,MAAM,aAAa;YACjC,SAAS;QACb,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,0BAA0B;QAC5C;IACJ,GAAG,OAAO,+CAA+C;AAC7D;AAEO,MAAM,kBAAkB,OAAO;IAClC,OAAO,IAAI,QAAQ,CAAC;QAChB,WAAW;YACP,QAAQ;gBACJ,IAAI;gBACJ,MAAM;gBACN,SAAS;oBACL,QAAQ;oBACR,MAAM;oBACN,QAAQ;gBACZ;gBACA,SAAS;gBACT,QAAQ;gBACR,WAAW,IAAI,OAAO,WAAW;gBACjC,WAAW,IAAI,OAAO,WAAW;gBACjC,WAAW;YACf;QACJ,GAAG;IACP;AACJ;AAEO,MAAM,sBAAsB,OAAO;IACtC,OAAO,IAAI,QAAQ,CAAC;QAChB,WAAW;YACP,QAAQ;gBACJ;oBACI,IAAI;oBACJ;oBACA,SAAS;oBACT,SAAS;wBACL,QAAQ;wBACR,MAAM;wBACN,QAAQ;oBACZ;oBACA,SAAS;oBACT,WAAW,IAAI,OAAO,WAAW;oBACjC,WAAW;gBACf;aACH;QACL,GAAG;IACP;AACJ"}},
    {"offset": {"line": 1147, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1153, "column": 0}, "map": {"version":3,"sources":["file:///Users/pumanar/Repos/AI4Devs/finalproject-PAUR/site/src/components/templates/TemplateEditor/index.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { EditorToolbar } from \"./components/EditorToolbar\";\nimport { SectionSelector } from \"./components/SectionSelector\";\nimport EditorContent from \"./components/EditorContent\";\nimport { PreviewPanel } from \"./components/PreviewPanel\";\nimport { Editor } from \"@tiptap/react\";\nimport { saveTemplate, autoSaveTemplate, publishTemplate } from \"@/services/templates/templateService\";\nimport { Template } from \"@/types/template\";\nimport { format } from \"date-fns\";\n\ninterface TemplateContent {\n    header: string;\n    body: string;\n    footer: string;\n}\n\nexport const TemplateEditor = () => {\n    const router = useRouter();\n    const [loading, setLoading] = useState(false);\n    const [currentSection, setCurrentSection] = useState<keyof TemplateContent>(\"body\");\n    const [editor, setEditor] = useState<Editor | null>(null);\n    const [content, setContent] = useState<TemplateContent>({\n        header: \"\",\n        body: \"\",\n        footer: \"\",\n    });\n    const [savedTemplate, setSavedTemplate] = useState<Template | null>(null);\n    const [saving, setSaving] = useState(false);\n    const [lastSaved, setLastSaved] = useState<Date | null>(null);\n\n    useEffect(() => {\n        if (!content.header && !content.body && !content.footer) return;\n\n        autoSaveTemplate(\n            {\n                name: \"Nueva Plantilla\",\n                content\n            },\n            (saved) => {\n                setSavedTemplate(saved);\n                setLastSaved(new Date());\n            }\n        );\n    }, [content]);\n\n    const handleCancel = () => {\n        router.back();\n    };\n\n    const handleContentChange = (newContent: string) => {\n        setContent((prev) => ({\n            ...prev,\n            [currentSection]: newContent,\n        }));\n    };\n\n    const handleSave = async () => {\n        setLoading(true);\n        try {\n            const saved = await saveTemplate({\n                name: \"Nueva Plantilla\",\n                content\n            });\n            setSavedTemplate(saved);\n            setLastSaved(new Date());\n            router.push(\"/dashboard\");\n        } catch (error) {\n            console.error(\"Error saving template:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handlePublish = async () => {\n        if (!savedTemplate) return;\n        setLoading(true);\n        try {\n            await publishTemplate(savedTemplate.id);\n            router.push(\"/dashboard\");\n        } catch (error) {\n            console.error(\"Error publishing template:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleVariableSelect = (variable: TemplateVariable) => {\n        if (!editor) return;\n        editor.chain().focus().insertContent(variable.key).run();\n    };\n\n    return (\n        <div className=\"p-6\">\n            <div className=\"flex justify-between items-center mb-6\">\n                <h1 className=\"text-2xl font-bold text-gray-900\">Nueva Plantilla</h1>\n                <div className=\"flex items-center gap-4\">\n                    {lastSaved && (\n                        <span className=\"text-sm text-gray-500\">\n                            Guardado {format(lastSaved, \"HH:mm:ss\")}\n                        </span>\n                    )}\n                    <button onClick={handleCancel}>Cancelar</button>\n                    <button onClick={handleSave} disabled={loading}>\n                        {loading ? \"Guardando...\" : \"Guardar\"}\n                    </button>\n                    {savedTemplate && (\n                        <button\n                            onClick={handlePublish}\n                            disabled={loading}\n                            className=\"px-4 py-2 bg-green-600 text-white rounded-md\"\n                        >\n                            Publicar\n                        </button>\n                    )}\n                </div>\n            </div>\n            <div className=\"bg-white shadow rounded-lg flex\">\n                <div className=\"flex-1 flex flex-col\">\n                    <EditorToolbar editor={editor} />\n                    <SectionSelector\n                        currentSection={currentSection}\n                        onSectionChange={(id) => setCurrentSection(id as keyof TemplateContent)}\n                    />\n                    <EditorContent\n                        key={currentSection}\n                        section={currentSection}\n                        content={content[currentSection]}\n                        onChange={handleContentChange}\n                        editor={editor}\n                        setEditor={setEditor}\n                    />\n                </div>\n                <PreviewPanel\n                    content={content}\n                    onVariableSelect={handleVariableSelect}\n                />\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAXA;;;;;;;;;;AAmBO,MAAM,iBAAiB;IAC1B,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAyB;IAC5E,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IACpD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAmB;QACpD,QAAQ;QACR,MAAM;QACN,QAAQ;IACZ;IACA,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAmB;IACpE,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAExD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,IAAI,CAAC,QAAQ,MAAM,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,MAAM,EAAE;QAEzD,CAAA,GAAA,+IAAA,CAAA,mBAAgB,AAAD,EACX;YACI,MAAM;YACN;QACJ,GACA,CAAC;YACG,iBAAiB;YACjB,aAAa,IAAI;QACrB;IAER,GAAG;QAAC;KAAQ;IAEZ,MAAM,eAAe;QACjB,OAAO,IAAI;IACf;IAEA,MAAM,sBAAsB,CAAC;QACzB,WAAW,CAAC,OAAS,CAAC;gBAClB,GAAG,IAAI;gBACP,CAAC,eAAe,EAAE;YACtB,CAAC;IACL;IAEA,MAAM,aAAa;QACf,WAAW;QACX,IAAI;YACA,MAAM,QAAQ,MAAM,CAAA,GAAA,+IAAA,CAAA,eAAY,AAAD,EAAE;gBAC7B,MAAM;gBACN;YACJ;YACA,iBAAiB;YACjB,aAAa,IAAI;YACjB,OAAO,IAAI,CAAC;QAChB,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,0BAA0B;QAC5C,SAAU;YACN,WAAW;QACf;IACJ;IAEA,MAAM,gBAAgB;QAClB,IAAI,CAAC,eAAe;QACpB,WAAW;QACX,IAAI;YACA,MAAM,CAAA,GAAA,+IAAA,CAAA,kBAAe,AAAD,EAAE,cAAc,EAAE;YACtC,OAAO,IAAI,CAAC;QAChB,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,8BAA8B;QAChD,SAAU;YACN,WAAW;QACf;IACJ;IAEA,MAAM,uBAAuB,CAAC;QAC1B,IAAI,CAAC,QAAQ;QACb,OAAO,KAAK,GAAG,KAAK,GAAG,aAAa,CAAC,SAAS,GAAG,EAAE,GAAG;IAC1D;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;kCAAmC;;;;;;kCACjD,8OAAC;wBAAI,WAAU;;4BACV,2BACG,8OAAC;gCAAK,WAAU;;oCAAwB;oCAC1B,CAAA,GAAA,qJAAA,CAAA,SAAM,AAAD,EAAE,WAAW;;;;;;;0CAGpC,8OAAC;gCAAO,SAAS;0CAAc;;;;;;0CAC/B,8OAAC;gCAAO,SAAS;gCAAY,UAAU;0CAClC,UAAU,iBAAiB;;;;;;4BAE/B,+BACG,8OAAC;gCACG,SAAS;gCACT,UAAU;gCACV,WAAU;0CACb;;;;;;;;;;;;;;;;;;0BAMb,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,gLAAA,CAAA,gBAAa;gCAAC,QAAQ;;;;;;0CACvB,8OAAC,kLAAA,CAAA,kBAAe;gCACZ,gBAAgB;gCAChB,iBAAiB,CAAC,KAAO,kBAAkB;;;;;;0CAE/C,8OAAC,gLAAA,CAAA,UAAa;gCAEV,SAAS;gCACT,SAAS,OAAO,CAAC,eAAe;gCAChC,UAAU;gCACV,QAAQ;gCACR,WAAW;+BALN;;;;;;;;;;;kCAQb,8OAAC,+KAAA,CAAA,eAAY;wBACT,SAAS;wBACT,kBAAkB;;;;;;;;;;;;;;;;;;AAKtC"}},
    {"offset": {"line": 1367, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}